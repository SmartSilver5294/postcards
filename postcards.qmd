---
title: "Voting and Postcards"
author: "Ayush Chandra"
format: html
execute: 
  echo: false
---


```{r}
#| message: false
library(tidyverse)
library(primer.data)
library(tidymodels)
library(broom)
```

```{r}
#| cache = true
x <- shaming |> 
  mutate(civ_engage = primary_00 + primary_02 + primary_04 + 
               general_00 + general_02 + general_04) |> 
  select(primary_06, treatment, sex, age, civ_engage) |> 
  mutate(voter_class = factor(
    case_when(
      civ_engage %in% c(5, 6) ~ "Always Vote",
      civ_engage %in% c(3, 4) ~ "Sometimes Vote",
      civ_engage %in% c(1, 2) ~ "Rarely Vote"),
         levels = c("Rarely Vote", 
                    "Sometimes Vote", 
                    "Always Vote"))) |>
  mutate(voted = as.factor(primary_06))

fit_vote <- logistic_reg(engine = "glm") |>
  fit(voted ~ age + sex + treatment * voter_class, data = x)

check_predictions(extract_fit_engine(fit_vote))
```
$$P(Y = 1) = \frac{1}{1 + e^{-(\beta_0 + \beta_1 X_1 + \beta_2 X_2 + \cdots + \beta_n X_n)}}$$
with $Y \sim \text{Bernoulli}(\rho)$ where $\rho$ is the probability above.

logit(P(voted=1))ˆ=−1.89+0.089⋅treatmentCivic Duty+0.125⋅treatmentHawthorne+0.227⋅treatmentSelf+0.371⋅treatmentNeighbors+0.038⋅sexMale+0.020⋅age


US campaigns include sending postcards to registered voters. For this analysis, we use data from a 2006 field experiment in Michigan to determine how to increase voter participation in Texas's elections. However, we recognize that Michigan may differ from Texas and the broader US. One weakness of this model is that it doesn't represent the overall US population because the data is only taken from Michigan.
